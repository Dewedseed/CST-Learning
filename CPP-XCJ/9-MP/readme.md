# Miscellaneous

C++ 中一些新的特性

## Container

**容器**

- Map 红黑树
  - 迭代器不是指针，只是进行了操作符重载

|   Container    |   访问   |   插入   |   删除   |   搜索   |
| :------------: | :------: | :------: | :------: | :------: |
| Array / Vector |   O(1)   |   O(1)   |   O(n)   |   O(n)   |
|  Linked List   |   O(n)   |   O(1)   |   O(1)   |   O(n)   |
|  Binary Tree   | O(log n) | O(log n) | O(log n) | O(log n) |

## Function Pointer

**函数指针**

- 普通函数指针
  - 初始特性，不建议使用
  - 全局函数
  - 成员函数
- 函数封装器 function
  - 覆盖全局函数和成员函数
  - 自定义参数，可以保存地址、参数（形参/实参），实现函数式编程
  - `bind`
    - 当需要传入函数对象，参数与返回值固定，但是部分参数较多时
    - 可以转变参数、将成员函数转换成普通函数
    - 内存上，会为实参申请空间
- Lambda 表达式
  - 临时函数：以前用法
  - 支持惰性求值
  - 函数实参一体：函数对象保存参数值，无需全局变量、指针
  - 语法
    - `[捕获] (形参) -> ret {函数体}`
    - `[捕获] (形参) {函数体}`
    - `[捕获] {函数体}`
  - 捕获
    - 默认捕获符：`&` 引用 `=` 复制
    - `this` C++17
    - 组合捕获：`[a, &b, &c]` `[=, &i]`
  - 注意
    - 形参可以自动推导
    - 大部分场景可使用引用

## Multi-Thread

**多线程**

- 应用场景
  - 任务分解 GUI
  - 数据分解 音视频
  - 数据流分解 一个线程输出作为另一个线程的输入
- 处理器 => 进程 => 线程
  - 线程状态：就绪、运行、阻塞、终止
  - 每个进程至少包含一个线程
- 锁 mutex
  - 资源竞争问题
  - 死锁：guard
- 异步 async
  - 替换 thread 方式，更直观
